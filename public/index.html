<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure String Sharing</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/default.min.css">
    <link rel="stylesheet" href="/css/themes.css">
    <style>
        /* Add responsive design styles */
        @media (max-width: 768px) {
            .container {
                width: 95%;
                margin: 0 auto;
            }
            
            .editor-toolbar {
                flex-wrap: wrap;
            }
        }

        /* Add social share button styles */
        .social-share-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .share-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            transition: opacity 0.2s;
        }

        .share-button:hover {
            opacity: 0.9;
        }

        .share-button.twitter {
            background-color: #1DA1F2;
            color: white;
        }

        .share-button.facebook {
            background-color: #4267B2;
            color: white;
        }

        .share-button.linkedin {
            background-color: #0077b5;
            color: white;
        }

        .share-button i {
            font-size: 18px;
        }

        /* Add copy URL button styles */
        .copy-url-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            background-color: #6c757d;
            color: white;
            margin-bottom: 15px;
        }

        .copy-url-button:hover {
            opacity: 0.9;
        }

        .copy-url-button i {
            font-size: 18px;
        }

        .copy-success {
            background-color: #28a745 !important;
            transition: background-color 0.3s ease;
        }

        /* Theme selector styles */
        .theme-selector {
            margin: 20px 0;
            padding: 10px;
            border-radius: 5px;
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .theme-selector select {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            background-color: var(--bg-color);
            color: var(--text-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Secure String Sharing</h1>
        
        <!-- Add theme selector -->
        <div class="theme-selector">
            <label for="theme-select">Choose Theme: </label>
            <select id="theme-select" onchange="changeTheme(this.value)">
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="ocean">Ocean</option>
                <option value="forest">Forest</option>
            </select>
        </div>
        <div id="editor-container">
            <textarea id="secure-editor"></textarea>
        </div>
        
        <div class="qr-customization">
            <h3>QR Code Customization</h3>
            <input type="color" id="qr-color" value="#000000">
            <input type="color" id="qr-bg-color" value="#ffffff">
            <input type="number" id="qr-size" value="300" min="100" max="1000">
        </div>

        <div class="share-options">
            <h3>Share Options</h3>
            <button class="copy-url-button" onclick="copyToClipboard()">
                <i class="fas fa-copy"></i>
                Copy URL
            </button>
            <div class="social-share-buttons">
                <button class="share-button twitter" onclick="shareOnSocial('twitter')">
                    <i class="fab fa-twitter"></i>
                    Twitter
                </button>
                <button class="share-button facebook" onclick="shareOnSocial('facebook')">
                    <i class="fab fa-facebook-f"></i>
                    Facebook
                </button>
                <button class="share-button linkedin" onclick="shareOnSocial('linkedin')">
                    <i class="fab fa-linkedin-in"></i>
                    LinkedIn
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/js/editor.js"></script>
    <script>
        // Initialize the secure editor
        const editor = new SecureEditor('secure-editor');
        
        // Load saved theme preference
        const savedTheme = localStorage.getItem('preferred-theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        
        // Updated social share function
        function shareOnSocial(network) {
            const url = encodeURIComponent(window.location.href);
            const title = encodeURIComponent('Check out this secure shared content!');
            
            const shareUrls = {
                twitter: `https://twitter.com/intent/tweet?url=${url}&text=${title}`,
                facebook: `https://www.facebook.com/sharer/sharer.php?u=${url}`,
                linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${url}`
            };
            
            window.open(shareUrls[network], '_blank', 'width=600,height=400');
        }
        
        // Add copy to clipboard function
        function copyToClipboard() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                const copyButton = document.querySelector('.copy-url-button');
                copyButton.classList.add('copy-success');
                copyButton.innerHTML = '<i class="fas fa-check"></i> Copied!';
                
                setTimeout(() => {
                    copyButton.classList.remove('copy-success');
                    copyButton.innerHTML = '<i class="fas fa-copy"></i> Copy URL';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy URL:', err);
                alert('Failed to copy URL to clipboard');
            });
        }
        
        // Theme switching function
        function changeTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('preferred-theme', theme);
            document.getElementById('theme-select').value = theme;
            
            // Apply theme to editor container and content
            const editorContainer = document.getElementById('editor-container');
            if (editorContainer) {
                editorContainer.style.backgroundColor = getComputedStyle(document.documentElement).getPropertyValue('--bg-color');
                editorContainer.style.color = getComputedStyle(document.documentElement).getPropertyValue('--text-color');
            }
        }

        // Load saved theme on page load
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('preferred-theme') || 'light';
            changeTheme(savedTheme);
        });
    </script>
</body>
</html>